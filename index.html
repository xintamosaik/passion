<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="base.css">
    
    <script>
      
        document.addEventListener('DOMContentLoaded', function(){
            console.log('DOM is ready');

            setInterval(showTime, 1000);
            
        });

        const startDate = new Date();
        // startDate.setDate(startDate.getDate() - 1);
        startDate.setHours(startDate.getHours() - 35);
        const dateEnd = new Date();
        //dateEnd.setDate(dateEnd.getDate() + 2);
        dateEnd.setHours(dateEnd.getHours() + 5);
        function showTime(){
            
            
            const dateNow = new Date();
            const timeStamp = dateNow.getTime();
            const timeStampEnd = dateEnd.getTime();
            
            const diff = timeStampEnd - timeStamp;
            const milliseconds = 1000;
            const seconds = 60;
            const minutes = 60;
            const hours = 24;
            const days = 365;

            const secondsLeft = diff / milliseconds;
            const minutesLeft = secondsLeft / seconds;
            const hoursLeft = minutesLeft / minutes;
            const daysLeft = hoursLeft / hours;
      
            const daysLeftInt = Math.floor(daysLeft);
            const hoursLeftInt = Math.floor(hoursLeft % hours);
            const minutesLeftInt = Math.floor(minutesLeft % minutes);
            const secondsLeftInt = Math.floor(secondsLeft % seconds);

            const secondsLeftString = secondsLeftInt < 10 ? '0' + secondsLeftInt : secondsLeftInt;
            const minutesLeftString = minutesLeftInt < 10 ? '0' + minutesLeftInt : minutesLeftInt;
            const hoursLeftString = hoursLeftInt < 10 ? '0' + hoursLeftInt : hoursLeftInt;
            const daysLeftString = daysLeftInt < 10 ? '0' + daysLeftInt : daysLeftInt;
            
            const timeLeft = `${daysLeftString} days and ${hoursLeftString}:${minutesLeftString}:${secondsLeftString}`;
            console.log(timeLeft);

            const timeLeftElement = document.querySelector('time-left');
            timeLeftElement.innerText = timeLeft + ' left';


            const elapsed = dateNow - startDate;
            console.log(elapsed);
            const timeFrame = dateEnd - startDate;
            console.log(timeFrame);

            const progress = elapsed / timeFrame;
            console.log(progress);

            const footer = document.querySelector('footer');
            // Construct a left to right gradient
            footer.style.background = `linear-gradient(to right, #a00a ${progress * 100}%, #eee3 ${progress * 100}%)`;

        }

       
    </script>
</head>
<body style="display:grid; height: 100vh; grid-template-rows: 30px 1fr 30px;">
    <header>
        #
    </header>
    <main>

    </main>
    <footer style="display: flex; justify-content: center;">
        <time-left style="font-size: 1.5em;"></time-left>

    </footer>
</body>
</html>